<% category = new %>
Add a new <% unless category.parent.nil? %>sub<% end %>category</br>
<% form_for :category, category, :url => manage_categories_url,
	:html => {
		:ajax_binding => 'ajax_form',
		:ajax_success_element => "category_list_#{category.parent_id}",
		:ajax_success_placement => 'append',
		:ajax_success_callback => "$('#category_new_link_#{category.parent_id}').click();",
		:ajax_error_element => 'category_new',
		:ajax_method => 'POST'
	} do |f| %>
	<div class="span-6 last">
				<div class="span-3">
			<%= category.first_error_on :name %>
			<%= f.text_field :name, :class => 'textfield-3' %>
		</div>
		
		<div class="span-3 last">
			<%= f.hidden_field :parent_id %>
<%= f.submit :add %>
		</div>
	</div>
<% end %>
<%= link_to '', new_manage_category_url,
 	:ajax_method => 'GET',
	:ajax_binding => 'ajax_link',
	:ajax_success_element => "category_new_#{category.parent_id}",
	:id => "category_new_link_#{category.parent_id}"
	%>